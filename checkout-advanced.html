<form action="recurring_payment.php" method="post">
  <p>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
  </p>
  <p>
    <label for="payment_method">Payment Method:</label>
    <select id="payment_method" name="payment_method" required>
      <option value="">Select Payment Method</option>
      <option value="credit_card">Credit Card</option>
      <option value="ideal">iDeal</option>
    </select>
  </p>
  <div id="credit_card_section" style="display:none;">
    <p>
      <label for="stripeToken">Credit Card:</label>
      <!-- Load Stripe.js to create a token -->
      <script src="https://js.stripe.com/v3/"></script>
      <div id="card-element"></div>
      <input type="hidden" id="stripeToken" name="stripeToken">
      <!-- Display error messages -->
      <div id="card-errors" role="alert"></div>
    </p>
  </div>
  <div id="ideal_section" style="display:none;">
    <p>
      <label for="ideal_bank">iDeal Bank:</label>
      <select id="ideal_bank" name="ideal_bank">
        <option value="">Select iDeal Bank</option>
        <option value="ing">ING</option>
        <option value="abn_amro">ABN AMRO</option>
        <!-- Add more iDeal banks if necessary -->
      </select>
    </p>
  </div>
  <p>
    <input type="submit" value="Subscribe">
  </p>
</form>

<!-- Show/hide payment method sections based on customer selection -->
<script>
  document.getElementById("payment_method").addEventListener("change", function() {
    var payment_method = this.value;
    if (payment_method == "credit_card") {
      document.getElementById("credit_card_section").style.display = "block";
      document.getElementById("ideal_section").style.display = "none";
      // Create a Stripe.js token for credit card payment
      var stripe = Stripe("pk_test_your_stripe_public_key");
      var elements = stripe.elements();
      var card = elements.create("card");
      card.mount("#card-element");
      card.addEventListener("change", function (event) {
        var displayError = document.getElementById("card-errors");
        if (event.error) {
          displayError.textContent = event.error.message;
        } else {
          displayError.textContent = "";
        }
      });
    } else if (payment_method == "ideal") {
      document.getElementById("credit_card_section").style.display = "none";
      document.getElementById("ideal_section").style.display = "block";
    } else {
      document.getElementById("credit_card_section").style.display = "none";
      document.getElementById("ideal_section").style.display = "none";
    }
  });
</script>

